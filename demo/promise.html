<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Promise测试</title>
    <script type="text/javascript" src="http://a.tbcdn.cn/s/kissy/1.3.0/seed.js"></script>
    <script src="../src/brick.js"></script>
</head>
<body>
    <button>执行</button>
    <div id="container"></div>
    <script type="text/javascript">
        KISSY.use('brix/core/brick,node',function(S,Brick){
            KISSY.all("button").on("click", function () {
                var brick = new Brick({
                    container:'#container',
                    listeners:{
                        getTemplate:function(e){
                            S.later(function(){
                                var tmpl = '{{haha}}';
                                e.next(tmpl)   
                            },2000);
                        },
                        getData:function(e){
                            var d = e.defer;
                            S.later(function(){
                                var data = {haha:'测试数据'};
                                e.next(data)   
                            },2000);
                        }
                    }
                });
            });
        });
    </script>
</body>
</html>